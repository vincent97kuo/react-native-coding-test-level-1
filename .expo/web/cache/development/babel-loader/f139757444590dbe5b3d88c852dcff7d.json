{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { put, takeEvery, select, call, take } from \"redux-saga/effects\";\nimport { api } from \"./api/ApiHelper\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { GET_CATALOG, GET_CATALOG_DETAIL, GET_CATALOG_DETAIL_RESULT, GET_CATALOG_RESULT } from \"../actions\";\nexport var getCatalogApi = function getCatalogApi(locale) {\n  var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var limit = arguments.length > 2 ? arguments[2] : undefined;\n  return api(\"pokemon\", \"GET\", {\n    page: page,\n    limit: limit\n  }, locale);\n};\n\nvar getCatalog = _regeneratorRuntime.mark(function _callee(action) {\n  var page, limit, response;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return select(function (state) {\n            return state.catalog.page;\n          });\n\n        case 3:\n          page = _context.sent;\n          _context.next = 6;\n          return select(function (state) {\n            return state.catalog.limit;\n          });\n\n        case 6:\n          limit = _context.sent;\n          _context.next = 9;\n          return call(getCatalogApi, locale, action.refresh ? 0 : page, limit);\n\n        case 9:\n          response = _context.sent;\n          _context.next = 12;\n          return put({\n            type: GET_CATALOG_RESULT,\n            payload: response.results,\n            refresh: action.refresh\n          });\n\n        case 12:\n          _context.next = 17;\n          break;\n\n        case 14:\n          _context.prev = 14;\n          _context.t0 = _context[\"catch\"](0);\n          Alert.alert(_context.t0);\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee, null, [[0, 14]]);\n});\n\nexport var getCatalogDetailApi = function getCatalogDetailApi(locale, id) {\n  return api(\"pokemon/\" + id, \"GET\", {}, locale);\n};\n\nvar getCatalogDetail = _regeneratorRuntime.mark(function _callee2(action) {\n  var response;\n  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return call(getCatalogDetailApi, locale, action.id);\n\n        case 3:\n          response = _context2.sent;\n          _context2.next = 6;\n          return put({\n            type: GET_CATALOG_DETAIL_RESULT,\n            payload: response\n          });\n\n        case 6:\n          _context2.next = 11;\n          break;\n\n        case 8:\n          _context2.prev = 8;\n          _context2.t0 = _context2[\"catch\"](0);\n          Alert.alert(_context2.t0);\n\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _callee2, null, [[0, 8]]);\n});\n\nexport var catalogSaga = [takeEvery(GET_CATALOG, getCatalog), takeEvery(GET_CATALOG_DETAIL, getCatalogDetail)];","map":{"version":3,"names":["put","takeEvery","select","call","take","api","GET_CATALOG","GET_CATALOG_DETAIL","GET_CATALOG_DETAIL_RESULT","GET_CATALOG_RESULT","getCatalogApi","locale","page","limit","getCatalog","action","state","catalog","refresh","response","type","payload","results","Alert","alert","getCatalogDetailApi","id","getCatalogDetail","catalogSaga"],"sources":["/Users/vincent/Documents/Assessment/react-native-coding-test-level-1/src/redux/saga/CatalogSaga.js"],"sourcesContent":["import { put, takeEvery, select, call, take } from \"redux-saga/effects\";\nimport { api } from \"./api/ApiHelper\";\nimport { Alert } from \"react-native\";\n\n//actions\nimport { GET_CATALOG, GET_CATALOG_DETAIL, GET_CATALOG_DETAIL_RESULT, GET_CATALOG_RESULT } from \"../actions\";\n\nexport const getCatalogApi = (locale, page = 0, limit) =>\n  api(\n    `pokemon`,\n    \"GET\",\n    { page, limit },\n    locale\n  );\nconst getCatalog = function* (action) {\n  try {\n    //show loading indicator\n    // yield put({\n    //   type: CHANGE_LOADING,\n    //   payload: 1,\n    // });\n    let page = yield select((state) => state.catalog.page);\n    let limit = yield select((state) => state.catalog.limit);\n    // console.log('_________________________', page[action.status])\n    const response = yield call(getCatalogApi, locale, action.refresh ? 0 : page, limit);\n    yield put({\n      type: GET_CATALOG_RESULT,\n      payload: response.results,\n      refresh: action.refresh,\n    });\n    // yield put({ type: CHANGE_LOADING, payload: -1 });\n  } catch (error) {\n    //show error message\n    // yield put({ type: CHANGE_LOADING, payload: -1 });\n    Alert.alert(error)\n  }\n};\n\nexport const getCatalogDetailApi = (locale, id) =>\n  api(`pokemon/${id}`, \"GET\", {}, locale);\nconst getCatalogDetail = function* (action) {\n  try {\n    //show loading indicator\n    // yield put({\n    //   type: CHANGE_LOADING,\n    //   payload: 1,\n    // });\n    const response = yield call(getCatalogDetailApi, locale, action.id);\n    yield put({\n      type: GET_CATALOG_DETAIL_RESULT,\n      payload: response,\n    });\n    // yield put({ type: CHANGE_LOADING, payload: -1 });\n  } catch (error) {\n    //show error message\n    // yield put({ type: CHANGE_LOADING, payload: -1 });\n    Alert.alert(error)\n  }\n};\n\nexport const catalogSaga = [\n  takeEvery(GET_CATALOG, getCatalog),\n  takeEvery(GET_CATALOG_DETAIL, getCatalogDetail),\n];\n"],"mappings":";AAAA,SAASA,GAAT,EAAcC,SAAd,EAAyBC,MAAzB,EAAiCC,IAAjC,EAAuCC,IAAvC,QAAmD,oBAAnD;AACA,SAASC,GAAT;;AAIA,SAASC,WAAT,EAAsBC,kBAAtB,EAA0CC,yBAA1C,EAAqEC,kBAArE;AAEA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,MAAD;EAAA,IAASC,IAAT,uEAAgB,CAAhB;EAAA,IAAmBC,KAAnB;EAAA,OAC3BR,GAAG,YAED,KAFC,EAGD;IAAEO,IAAI,EAAJA,IAAF;IAAQC,KAAK,EAALA;EAAR,CAHC,EAIDF,MAJC,CADwB;AAAA,CAAtB;;AAOP,IAAMG,UAAU,4BAAG,iBAAWC,MAAX;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAOJ,OAAMb,MAAM,CAAC,UAACc,KAAD;YAAA,OAAWA,KAAK,CAACC,OAAN,CAAcL,IAAzB;UAAA,CAAD,CAAZ;;QAPI;UAOXA,IAPW;UAAA;UAQH,OAAMV,MAAM,CAAC,UAACc,KAAD;YAAA,OAAWA,KAAK,CAACC,OAAN,CAAcJ,KAAzB;UAAA,CAAD,CAAZ;;QARG;UAQXA,KARW;UAAA;UAUE,OAAMV,IAAI,CAACO,aAAD,EAAgBC,MAAhB,EAAwBI,MAAM,CAACG,OAAP,GAAiB,CAAjB,GAAqBN,IAA7C,EAAmDC,KAAnD,CAAV;;QAVF;UAUTM,QAVS;UAAA;UAWf,OAAMnB,GAAG,CAAC;YACRoB,IAAI,EAAEX,kBADE;YAERY,OAAO,EAAEF,QAAQ,CAACG,OAFV;YAGRJ,OAAO,EAAEH,MAAM,CAACG;UAHR,CAAD,CAAT;;QAXe;UAAA;UAAA;;QAAA;UAAA;UAAA;UAoBfK,KAAK,CAACC,KAAN;;QApBe;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAH,CAAhB;;AAwBA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACd,MAAD,EAASe,EAAT;EAAA,OACjCrB,GAAG,cAAYqB,EAAZ,EAAkB,KAAlB,EAAyB,EAAzB,EAA6Bf,MAA7B,CAD8B;AAAA,CAA5B;;AAEP,IAAMgB,gBAAgB,4BAAG,kBAAWZ,MAAX;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAOJ,OAAMZ,IAAI,CAACsB,mBAAD,EAAsBd,MAAtB,EAA8BI,MAAM,CAACW,EAArC,CAAV;;QAPI;UAOfP,QAPe;UAAA;UAQrB,OAAMnB,GAAG,CAAC;YACRoB,IAAI,EAAEZ,yBADE;YAERa,OAAO,EAAEF;UAFD,CAAD,CAAT;;QARqB;UAAA;UAAA;;QAAA;UAAA;UAAA;UAgBrBI,KAAK,CAACC,KAAN;;QAhBqB;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAH,CAAtB;;AAoBA,OAAO,IAAMI,WAAW,GAAG,CACzB3B,SAAS,CAACK,WAAD,EAAcQ,UAAd,CADgB,EAEzBb,SAAS,CAACM,kBAAD,EAAqBoB,gBAArB,CAFgB,CAApB"},"metadata":{},"sourceType":"module"}